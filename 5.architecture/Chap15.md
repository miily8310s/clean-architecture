# 第１５章 アーキテクチャとは？

- ソフトウェアアーキテクトは絶大な力を持ち、尊敬を集める人物が思い浮かぶ
- ソフトウェアアーキテクトは何をするのか？
  - 最高のプログラマであり、プログラミングしながら生産性を最大化する設計にチームを導く
- ソフトウェアアーキテクチャとは何か？
  - ソフトウェアシステムを構築した人がシステムに与えた「形状」のこと
    - 「形状」を生み出すためには、システムをコンポーネントに分割し、コンポーネントを上手く配置して、コンポーネントが相互に通信できるようにする必要がある
  - 目的
    - 主な目的：システムの開発・デプロイ・運用・保守といったライフサイクルを容易にすること
    - 最終的にライフサイクルコスト最小限に抑え、プログラマの生産性を最大にすること

## 開発

- 開発が難しくソフトウェア・システムは、ライフタイムが長くて健全である可能性が低い
- システムのアーキテクチャによって、チームが開発しやすくなるようなシステムにすべき

## デプロイ

<!-- TODO: マイクロサービスアーキテクチャについて調べる -->

- ソフトウェアシステムが効果を生み出すためには、デプロイ可能な状態でなければいけない
  - デプロイのコストが高ければ、その文だけシステムの有用性は低下する
- ソフトウェアアーキテクチャの目的：システムを**単一のアクション**で簡単にデプロイ出来るようにすること

## 運用

- システムの運用に対するアーキテクチャの影響は、開発・デプロイ・保守に対する影響と比べるとさほど大きくない
- 運用の問題の多くは、ハードウェアを追加すれば解決できる

## 保守

- ソフトウェアシステムのすべてにおいて、保守は最もコストがかかるもの
- 保守の主なコスト：**洞窟探検**とリスク
  - **洞窟探検**：既存のソフトウェアを掘り起こし、新しい機能の追加や欠陥の修正において、最適な場所や戦略を見つけるコスト
- 保守において変更を行っているうちに、意図しない結果を生み出す可能性が生まれ、リスクのコストを高めてしまう
  - アーキテクチャを慎重に考え抜くことで、これらのコストは大幅に低下する

## 選択肢を残しておく

- ソフトウェアには２種類の価値がある
  - 「振る舞いの価値」
  - 「構造の価値」 → 価値が大きいのはこっち（ソフトウェアを**ソフト**にする）
- ソフトウェアをソフトに保つには、出来るだけ長い期間かつ多く選択肢を残す必要がある
  - 残すべき選択肢：重要ではない**詳細**
- ソフトウェアシステムは、大きく２つの要素に分割出来る
  - 「方針」：ビジネスのすべてのルールや手順
  - 「詳細」：方針についてやり取りするために必要なもの。データベース、サーバー、フレームワークなどが含まれる
- アーキテクトの目的：「方針」とは**無関係**に「詳細」を決めながら、「方針」をシステムの最も重要な要素とするシステムの「形状」を作ること
  - こうすることで、「詳細」の決定を**延期・留保**出来る
  - 「詳細」の決定を**延期・留保**することで、**その文だけ適切に作るための情報が数多く手に入る**
    - 色んなデータベースやフレームワークなどを試し、妥当性やパフォーマンスをチェックすることが出来る
    - 選択肢を残せる期間が長いほど、決定しなければいけない時点までにチェックしたり挑戦できることが増える
  - 会社がすでに特定のデータベースやフレームワークなどの「詳細」を決めていた場合は？
    - **優秀なアーキテクトなら、まだ決まっていないと主張する**

## まとめ

- 優れたアーキテクトは、「方針」と「詳細」を慎重に区別して、「方針」が「詳細」を把握することなく両者を切り離す
- また「詳細」の決定を出来るだけ延期・留保できるように、方針をデザインする
