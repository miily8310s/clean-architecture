# 第１２章 コンポーネントの凝集性

- どのクラスをどのコンポーネントに含めればいいのか？
- → 優れたソフトウェアエンジニアリングの原則に従った判断が求められる
- 本章では、コンポーネントの凝集性に関する以下の原則を取り上げる
  - 再利用・リリース等価の原則（REP）
  - 閉鎖性共通の原則（CCP）
  - 全再利用の原則（CRP）

## 再利用・リリース等価の原則（REP）

- **再利用・リリース等価の原則（REP）**：再利用の単位とリリースの単位は等価になる

## 閉鎖性共通の原則（CCP）

- **閉鎖性共通の原則（CCP）**：

  - 同じ理由、同じタイミングで変更されるクラスをコンポーネントにまとめること
  - 変更の理由やタイミングが異なるクラスは、別のコンポーネントに分ける

- SOLID 原則の`単一責任の原則（SRP）`をコンポーネント向けに言い換えたもの
  - 本法則では「コンポーネント」を変更する理由が複数あるべきでない、と説いている
- 変更箇所が一つのコンポーネントに閉じていれば、変更のデプロイはそのコンポーネントのみになる
- ２つのくらすが物理的・概念的に密結合していて、変更のタイミングがいつも一緒になるのなら、同じコンポーネントに属する
  - なのでそういったクラスは一つにまとめておくべき

### 単一責任の原則（SRP）の類似点

閉鎖性共通の原則（CCP）/ 単一責任の原則（SRP）ともに以下のことを示している。

- 同じタイミング・理由で変更するものはひとまとめにする
- 逆に異なるものは別々に分ける

## 全再利用の原則（CRP）

- コンポーネントのユーザーに対して、実際には使わないものへの依存を強要してはいけない
- 本法則はどのクラスを同じコンポーネントにまとめる**べきでないか**も教えてくれる
- 一つのコンポーネントにまとめるクラスはどれも切り離せないものにする
  - = 依存するクラスもあれば依存しないクラスもあるという状況は避けて置きたい
- 密結合していないクラスを同じコンポーネントにまとめるべきではない

### インターフェース分離の原則（ISP）との関係

- ※インターフェース分離の原則（ISP）：使っていないメソッドを持つクラスに依存しないようにする

全再利用の原則（CRP）/ インターフェース分離の原則（ISP）ともに以下のことを示している。

- 不要なものに依存しないこと
